with System;
with x86.Port_IO;
with Interfaces; use Interfaces;
package VGA.DAC is
   pragma Preelaborate;
   
   procedure load_default_palette;
private
   type Color is new Unsigned_6 range 0 .. 2**6-1;
   for Color'Size use 8;

   type Palette_Color is record
      RED : Color;
      Green : Color;
      Blue : Color;
   end record;

   type Palette is array (1 .. 256) of Palette_Color;
   Palette_Address_Register_Write_Address : constant System.Address := 16#03C8#;
   Palette_Data_Register_Address : constant System.Address := 16#03C9#;
   DAC_State_Register_Address : constant System.Address := 16#03C7#;
   PEL_Mask_Register_Address : constant System.Address := 16#03C6#;

   type DAC_Register is (
      DAC_State,
      Palette_Data,
      PEL_Mask
      );


   function Read_Dac_State_Register is new x86.Port_IO.Read_Port_8 (DAC_State_Register_Address, Unsigned_8);
   function Read_PEL_Mask_Register is new x86.Port_IO.Read_Port_8 (PEL_Mask_Register_Address, Unsigned_8);
   procedure Write_Palette_Data_Register is new x86.Port_IO.Write_Port_8 (Palette_Data_Register_Address, Color);
   procedure Write_Address is new x86.Port_IO.Write_Port_8 (Palette_Address_Register_Write_Address, Unsigned_8);

Default_Palette : constant Palette :=
(
   1 => (Red => 0, Green => 0, Blue => 0),
   2 => (Red => 32, Green => 0, Blue => 0),
   3 => (Red => 0, Green => 32, Blue => 0),
   4 => (Red => 32, Green => 32, Blue => 0),
   5 => (Red => 0, Green => 0, Blue => 32),
   6 => (Red => 32, Green => 0, Blue => 32),
   7 => (Red => 0, Green => 32, Blue => 32),
   8 => (Red => 48, Green => 48, Blue => 48),
   9 => (Red => 48, Green => 55, Blue => 48),
   10 => (Red => 41, Green => 50, Blue => 60),
   11 => (Red => 16, Green => 8, Blue => 0),
   12 => (Red => 24, Green => 8, Blue => 0),
   13 => (Red => 32, Green => 8, Blue => 0),
   14 => (Red => 40, Green => 8, Blue => 0),
   15 => (Red => 48, Green => 8, Blue => 0),
   16 => (Red => 56, Green => 8, Blue => 0),
   17 => (Red => 0, Green => 16, Blue => 0),
   18 => (Red => 8, Green => 16, Blue => 0),
   19 => (Red => 16, Green => 16, Blue => 0),
   20 => (Red => 24, Green => 16, Blue => 0),
   21 => (Red => 32, Green => 16, Blue => 0),
   22 => (Red => 40, Green => 16, Blue => 0),
   23 => (Red => 48, Green => 16, Blue => 0),
   24 => (Red => 56, Green => 16, Blue => 0),
   25 => (Red => 0, Green => 24, Blue => 0),
   26 => (Red => 8, Green => 24, Blue => 0),
   27 => (Red => 16, Green => 24, Blue => 0),
   28 => (Red => 24, Green => 24, Blue => 0),
   29 => (Red => 32, Green => 24, Blue => 0),
   30 => (Red => 40, Green => 24, Blue => 0),
   31 => (Red => 48, Green => 24, Blue => 0),
   32 => (Red => 56, Green => 24, Blue => 0),
   33 => (Red => 0, Green => 32, Blue => 0),
   34 => (Red => 8, Green => 32, Blue => 0),
   35 => (Red => 16, Green => 32, Blue => 0),
   36 => (Red => 24, Green => 32, Blue => 0),
   37 => (Red => 32, Green => 32, Blue => 0),
   38 => (Red => 40, Green => 32, Blue => 0),
   39 => (Red => 48, Green => 32, Blue => 0),
   40 => (Red => 56, Green => 32, Blue => 0),
   41 => (Red => 0, Green => 40, Blue => 0),
   42 => (Red => 8, Green => 40, Blue => 0),
   43 => (Red => 16, Green => 40, Blue => 0),
   44 => (Red => 24, Green => 40, Blue => 0),
   45 => (Red => 32, Green => 40, Blue => 0),
   46 => (Red => 40, Green => 40, Blue => 0),
   47 => (Red => 48, Green => 40, Blue => 0),
   48 => (Red => 56, Green => 40, Blue => 0),
   49 => (Red => 0, Green => 48, Blue => 0),
   50 => (Red => 8, Green => 48, Blue => 0),
   51 => (Red => 16, Green => 48, Blue => 0),
   52 => (Red => 24, Green => 48, Blue => 0),
   53 => (Red => 32, Green => 48, Blue => 0),
   54 => (Red => 40, Green => 48, Blue => 0),
   55 => (Red => 48, Green => 48, Blue => 0),
   56 => (Red => 56, Green => 48, Blue => 0),
   57 => (Red => 0, Green => 56, Blue => 0),
   58 => (Red => 8, Green => 56, Blue => 0),
   59 => (Red => 16, Green => 56, Blue => 0),
   60 => (Red => 24, Green => 56, Blue => 0),
   61 => (Red => 32, Green => 56, Blue => 0),
   62 => (Red => 40, Green => 56, Blue => 0),
   63 => (Red => 48, Green => 56, Blue => 0),
   64 => (Red => 56, Green => 56, Blue => 0),
   65 => (Red => 0, Green => 0, Blue => 16),
   66 => (Red => 8, Green => 0, Blue => 16),
   67 => (Red => 16, Green => 0, Blue => 16),
   68 => (Red => 24, Green => 0, Blue => 16),
   69 => (Red => 32, Green => 0, Blue => 16),
   70 => (Red => 40, Green => 0, Blue => 16),
   71 => (Red => 48, Green => 0, Blue => 16),
   72 => (Red => 56, Green => 0, Blue => 16),
   73 => (Red => 0, Green => 8, Blue => 16),
   74 => (Red => 8, Green => 8, Blue => 16),
   75 => (Red => 16, Green => 8, Blue => 16),
   76 => (Red => 24, Green => 8, Blue => 16),
   77 => (Red => 32, Green => 8, Blue => 16),
   78 => (Red => 40, Green => 8, Blue => 16),
   79 => (Red => 48, Green => 8, Blue => 16),
   80 => (Red => 56, Green => 8, Blue => 16),
   81 => (Red => 0, Green => 16, Blue => 16),
   82 => (Red => 8, Green => 16, Blue => 16),
   83 => (Red => 16, Green => 16, Blue => 16),
   84 => (Red => 24, Green => 16, Blue => 16),
   85 => (Red => 32, Green => 16, Blue => 16),
   86 => (Red => 40, Green => 16, Blue => 16),
   87 => (Red => 48, Green => 16, Blue => 16),
   88 => (Red => 56, Green => 16, Blue => 16),
   89 => (Red => 0, Green => 24, Blue => 16),
   90 => (Red => 8, Green => 24, Blue => 16),
   91 => (Red => 16, Green => 24, Blue => 16),
   92 => (Red => 24, Green => 24, Blue => 16),
   93 => (Red => 32, Green => 24, Blue => 16),
   94 => (Red => 40, Green => 24, Blue => 16),
   95 => (Red => 48, Green => 24, Blue => 16),
   96 => (Red => 56, Green => 24, Blue => 16),
   97 => (Red => 0, Green => 32, Blue => 16),
   98 => (Red => 8, Green => 32, Blue => 16),
   99 => (Red => 16, Green => 32, Blue => 16),
   100 => (Red => 24, Green => 32, Blue => 16),
   101 => (Red => 32, Green => 32, Blue => 16),
   102 => (Red => 40, Green => 32, Blue => 16),
   103 => (Red => 48, Green => 32, Blue => 16),
   104 => (Red => 56, Green => 32, Blue => 16),
   105 => (Red => 0, Green => 40, Blue => 16),
   106 => (Red => 8, Green => 40, Blue => 16),
   107 => (Red => 16, Green => 40, Blue => 16),
   108 => (Red => 24, Green => 40, Blue => 16),
   109 => (Red => 32, Green => 40, Blue => 16),
   110 => (Red => 40, Green => 40, Blue => 16),
   111 => (Red => 48, Green => 40, Blue => 16),
   112 => (Red => 56, Green => 40, Blue => 16),
   113 => (Red => 0, Green => 48, Blue => 16),
   114 => (Red => 8, Green => 48, Blue => 16),
   115 => (Red => 16, Green => 48, Blue => 16),
   116 => (Red => 24, Green => 48, Blue => 16),
   117 => (Red => 32, Green => 48, Blue => 16),
   118 => (Red => 40, Green => 48, Blue => 16),
   119 => (Red => 48, Green => 48, Blue => 16),
   120 => (Red => 56, Green => 48, Blue => 16),
   121 => (Red => 0, Green => 56, Blue => 16),
   122 => (Red => 8, Green => 56, Blue => 16),
   123 => (Red => 16, Green => 56, Blue => 16),
   124 => (Red => 24, Green => 56, Blue => 16),
   125 => (Red => 32, Green => 56, Blue => 16),
   126 => (Red => 40, Green => 56, Blue => 16),
   127 => (Red => 48, Green => 56, Blue => 16),
   128 => (Red => 56, Green => 56, Blue => 16),
   129 => (Red => 0, Green => 0, Blue => 32),
   130 => (Red => 8, Green => 0, Blue => 32),
   131 => (Red => 16, Green => 0, Blue => 32),
   132 => (Red => 24, Green => 0, Blue => 32),
   133 => (Red => 32, Green => 0, Blue => 32),
   134 => (Red => 40, Green => 0, Blue => 32),
   135 => (Red => 48, Green => 0, Blue => 32),
   136 => (Red => 56, Green => 0, Blue => 32),
   137 => (Red => 0, Green => 8, Blue => 32),
   138 => (Red => 8, Green => 8, Blue => 32),
   139 => (Red => 16, Green => 8, Blue => 32),
   140 => (Red => 24, Green => 8, Blue => 32),
   141 => (Red => 32, Green => 8, Blue => 32),
   142 => (Red => 40, Green => 8, Blue => 32),
   143 => (Red => 48, Green => 8, Blue => 32),
   144 => (Red => 56, Green => 8, Blue => 32),
   145 => (Red => 0, Green => 16, Blue => 32),
   146 => (Red => 8, Green => 16, Blue => 32),
   147 => (Red => 16, Green => 16, Blue => 32),
   148 => (Red => 24, Green => 16, Blue => 32),
   149 => (Red => 32, Green => 16, Blue => 32),
   150 => (Red => 40, Green => 16, Blue => 32),
   151 => (Red => 48, Green => 16, Blue => 32),
   152 => (Red => 56, Green => 16, Blue => 32),
   153 => (Red => 0, Green => 24, Blue => 32),
   154 => (Red => 8, Green => 24, Blue => 32),
   155 => (Red => 16, Green => 24, Blue => 32),
   156 => (Red => 24, Green => 24, Blue => 32),
   157 => (Red => 32, Green => 24, Blue => 32),
   158 => (Red => 40, Green => 24, Blue => 32),
   159 => (Red => 48, Green => 24, Blue => 32),
   160 => (Red => 56, Green => 24, Blue => 32),
   161 => (Red => 0, Green => 32, Blue => 32),
   162 => (Red => 8, Green => 32, Blue => 32),
   163 => (Red => 16, Green => 32, Blue => 32),
   164 => (Red => 24, Green => 32, Blue => 32),
   165 => (Red => 32, Green => 32, Blue => 32),
   166 => (Red => 40, Green => 32, Blue => 32),
   167 => (Red => 48, Green => 32, Blue => 32),
   168 => (Red => 56, Green => 32, Blue => 32),
   169 => (Red => 0, Green => 40, Blue => 32),
   170 => (Red => 8, Green => 40, Blue => 32),
   171 => (Red => 16, Green => 40, Blue => 32),
   172 => (Red => 24, Green => 40, Blue => 32),
   173 => (Red => 32, Green => 40, Blue => 32),
   174 => (Red => 40, Green => 40, Blue => 32),
   175 => (Red => 48, Green => 40, Blue => 32),
   176 => (Red => 56, Green => 40, Blue => 32),
   177 => (Red => 0, Green => 48, Blue => 32),
   178 => (Red => 8, Green => 48, Blue => 32),
   179 => (Red => 16, Green => 48, Blue => 32),
   180 => (Red => 24, Green => 48, Blue => 32),
   181 => (Red => 32, Green => 48, Blue => 32),
   182 => (Red => 40, Green => 48, Blue => 32),
   183 => (Red => 48, Green => 48, Blue => 32),
   184 => (Red => 56, Green => 48, Blue => 32),
   185 => (Red => 0, Green => 56, Blue => 32),
   186 => (Red => 8, Green => 56, Blue => 32),
   187 => (Red => 16, Green => 56, Blue => 32),
   188 => (Red => 24, Green => 56, Blue => 32),
   189 => (Red => 32, Green => 56, Blue => 32),
   190 => (Red => 40, Green => 56, Blue => 32),
   191 => (Red => 48, Green => 56, Blue => 32),
   192 => (Red => 56, Green => 56, Blue => 32),
   193 => (Red => 0, Green => 0, Blue => 48),
   194 => (Red => 8, Green => 0, Blue => 48),
   195 => (Red => 16, Green => 0, Blue => 48),
   196 => (Red => 24, Green => 0, Blue => 48),
   197 => (Red => 32, Green => 0, Blue => 48),
   198 => (Red => 40, Green => 0, Blue => 48),
   199 => (Red => 48, Green => 0, Blue => 48),
   200 => (Red => 56, Green => 0, Blue => 48),
   201 => (Red => 0, Green => 8, Blue => 48),
   202 => (Red => 8, Green => 8, Blue => 48),
   203 => (Red => 16, Green => 8, Blue => 48),
   204 => (Red => 24, Green => 8, Blue => 48),
   205 => (Red => 32, Green => 8, Blue => 48),
   206 => (Red => 40, Green => 8, Blue => 48),
   207 => (Red => 48, Green => 8, Blue => 48),
   208 => (Red => 56, Green => 8, Blue => 48),
   209 => (Red => 0, Green => 16, Blue => 48),
   210 => (Red => 8, Green => 16, Blue => 48),
   211 => (Red => 16, Green => 16, Blue => 48),
   212 => (Red => 24, Green => 16, Blue => 48),
   213 => (Red => 32, Green => 16, Blue => 48),
   214 => (Red => 40, Green => 16, Blue => 48),
   215 => (Red => 48, Green => 16, Blue => 48),
   216 => (Red => 56, Green => 16, Blue => 48),
   217 => (Red => 0, Green => 24, Blue => 48),
   218 => (Red => 8, Green => 24, Blue => 48),
   219 => (Red => 16, Green => 24, Blue => 48),
   220 => (Red => 24, Green => 24, Blue => 48),
   221 => (Red => 32, Green => 24, Blue => 48),
   222 => (Red => 40, Green => 24, Blue => 48),
   223 => (Red => 48, Green => 24, Blue => 48),
   224 => (Red => 56, Green => 24, Blue => 48),
   225 => (Red => 0, Green => 32, Blue => 48),
   226 => (Red => 8, Green => 32, Blue => 48),
   227 => (Red => 16, Green => 32, Blue => 48),
   228 => (Red => 24, Green => 32, Blue => 48),
   229 => (Red => 32, Green => 32, Blue => 48),
   230 => (Red => 40, Green => 32, Blue => 48),
   231 => (Red => 48, Green => 32, Blue => 48),
   232 => (Red => 56, Green => 32, Blue => 48),
   233 => (Red => 0, Green => 40, Blue => 48),
   234 => (Red => 8, Green => 40, Blue => 48),
   235 => (Red => 16, Green => 40, Blue => 48),
   236 => (Red => 24, Green => 40, Blue => 48),
   237 => (Red => 32, Green => 40, Blue => 48),
   238 => (Red => 40, Green => 40, Blue => 48),
   239 => (Red => 48, Green => 40, Blue => 48),
   240 => (Red => 56, Green => 40, Blue => 48),
   241 => (Red => 0, Green => 48, Blue => 48),
   242 => (Red => 8, Green => 48, Blue => 48),
   243 => (Red => 16, Green => 48, Blue => 48),
   244 => (Red => 24, Green => 48, Blue => 48),
   245 => (Red => 32, Green => 48, Blue => 48),
   246 => (Red => 40, Green => 48, Blue => 48),
   247 => (Red => 63, Green => 62, Blue => 60),
   248 => (Red => 40, Green => 40, Blue => 41),
   249 => (Red => 32, Green => 32, Blue => 32),
   250 => (Red => 63, Green => 0, Blue => 0),
   251 => (Red => 0, Green => 63, Blue => 0),
   252 => (Red => 63, Green => 63, Blue => 0),
   253 => (Red => 0, Green => 0, Blue => 63),
   254 => (Red => 63, Green => 0, Blue => 63),
   255 => (Red => 0, Green => 63, Blue => 63),
   256 => (Red => 63, Green => 63, Blue => 63)
);
end VGA.DAC;